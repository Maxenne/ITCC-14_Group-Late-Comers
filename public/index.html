<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Game Release Tracker — Frontend Demo</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--accent:#7dd3fc}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Arial;background:linear-gradient(180deg,#071029 0%,#071421 100%);color:#e6eef6;margin:0;padding:24px}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,.6);margin-top:16px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:inherit}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    button{background:var(--accent);border:none;padding:8px 12px;border-radius:10px;cursor:pointer}
    .tiny{padding:6px 8px;font-size:13px}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th,td{padding:8px;border-bottom:1px dashed rgba(255,255,255,.03);text-align:left;font-size:13px}
    .muted{color:var(--muted)}
    .example-json{white-space:pre-wrap;background:#021025;padding:12px;border-radius:8px;margin-top:8px;color:#aee7ff}
    footer{margin-top:20px;color:var(--muted);font-size:13px}
    @media(max-width:720px){.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='44' height='44'><rect rx='8' width='44' height='44' fill='%237dd3fc'/><text x='50%' y='55%' font-size='20' font-family='Arial' text-anchor='middle' fill='%23071a2b'>GR</text></svg>" alt="logo" style="width:44px;height:44px;border-radius:8px;"/>
      <div>
        <h1>Game Release Tracker — Frontend Demo</h1>
        <div class="muted">A simple single-file UI to demo the Game Release Tracker API (ITCC 14 A)</div>
      </div>
    </header>

    <section class="card" id="api-config">
      <h3>API Configuration</h3>
      <p class="muted">Set the base URL for your API (for local dev: http://localhost:3000)</p>
      <label for="baseUrl">API Base URL</label>
      <input id="baseUrl" placeholder="https://your-api.example.com" value="https://your-api.example.com" />
      <div style="margin-top:8px" class="muted">
        Endpoints used by this demo:
        <ul>
          <li><code>POST /add</code> — add a new game</li>
          <li><code>GET /games</code> — get all games</li>
          <li><code>GET /upcoming</code> — upcoming releases</li>
          <li><code>GET /released</code> — released games</li>
          <li><code>GET /games?q=search</code> — search by title</li>
        </ul>
      </div>
    </section>

    <section class="card" id="add-game">
      <h3>Add New Game</h3>
      <div class="row">
        <div>
          <label>Title</label>
          <input id="title" placeholder="Game title" />
        </div>
        <div>
          <label>Platform(s) — comma separated</label>
          <input id="platforms" placeholder="PC, PS5, Xbox" />
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label>Developer(s)</label>
          <input id="developer" placeholder="Studio name" />
        </div>
        <div>
          <label>Publisher(s)</label>
          <input id="publisher" placeholder="Publisher name" />
        </div>
      </div>

      <div style="margin-top:8px" class="row">
        <div>
          <label>Release Date</label>
          <input id="releaseDate" type="date" />
        </div>
        <div>
          <label>Status</label>
          <select id="status">
            <option value="upcoming">upcoming</option>
            <option value="released">released</option>
            <option value="delayed">delayed</option>
            <option value="cancelled">cancelled</option>
          </select>
        </div>
      </div>

      <div style="margin-top:12px">
        <label>Notes (optional)</label>
        <textarea id="notes" rows="3" placeholder="Short notes"></textarea>
      </div>

      <div class="actions">
        <button id="addBtn">Add Game</button>
        <button id="getAll" class="tiny">Get All Games</button>
        <button id="getUpcoming" class="tiny">Upcoming</button>
        <button id="getReleased" class="tiny">Released</button>
      </div>

      <div id="addResult" class="muted" style="margin-top:8px"></div>
    </section>

    <section class="card" id="search">
      <h3>Search</h3>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="q" placeholder="Search by title (e.g. Zelda)" />
        <button id="searchBtn" class="tiny">Search</button>
      </div>
    </section>

    <section class="card" id="results">
      <h3>Results</h3>
      <div id="resultCount" class="muted">No results yet</div>
      <div id="tableWrap"></div>
      <div class="example-json" id="rawJson" style="display:none"></div>
    </section>

    <section class="card">
      <h3>API Spec (short)</h3>
      <div class="muted">Example request and response formats — use these when building the backend.</div>
      <pre class="example-json">POST /add
Body (JSON):
{
  "title": "Example Game",
  "developer": "Studio Name",
  "publisher": "Publisher Name",
  "platforms": ["PC","PS5"],
  "releaseDate": "2026-02-17",
  "status": "upcoming",
  "notes": "optional"
}

GET /games
Response (200):
[
  {
    "id":"uuid-or-db-key",
    "title":"Example Game",
    "developer":"Studio Name",
    "publisher":"Publisher Name",
    "platforms": ["PC","PS5"],
    "releaseDate":"2026-02-17",
    "status":"upcoming",
    "notes":"optional"
  }
]
</pre>

      <div class="muted">Notes: The API is intentionally minimal to make it easy for students to implement and test.</div>
    </section>

    <footer class="muted">
      Save this file as <code>index.html</code> and open it in your browser.
    </footer>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const baseUrlInput = $('baseUrl');
    const tableWrap = $('tableWrap');
    const rawJson = $('rawJson');
    const resultCount = $('resultCount');

    function getBase() {
      return baseUrlInput.value.replace(/\/+$/, '');
    }

    function showJson(data) {
      rawJson.style.display = 'block';
      rawJson.textContent = JSON.stringify(data, null, 2);
    }

    function hideJson() {
      rawJson.style.display = 'none';
    }

    function escapeHtml(s) {
      if (!s) return '';
      return String(s).replace(/[&<>\"']/g, c => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      })[c]);
    }

    function renderTable(items) {
      if (!items || items.length === 0) {
        tableWrap.innerHTML = '<div class="muted">No items</div>';
        resultCount.textContent = '0 results';
        hideJson();
        return;
      }

      resultCount.textContent = items.length + ' result(s)';

      const rows = items.map(it => `
        <tr>
          <td>${escapeHtml(it.title)}</td>
          <td class="muted">${escapeHtml((it.platforms || []).join(', '))}</td>
          <td>${it.releaseDate || '—'}</td>
          <td>${it.status || '—'}</td>
        </tr>
      `).join('');

      tableWrap.innerHTML = `
        <table>
          <thead>
            <tr>
              <th>Title</th>
              <th class="muted">Platforms</th>
              <th>Release Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            ${rows}
          </tbody>
        </table>
      `;

      showJson(items);
    }

    async function postAdd() {
      const payload = {
        title: $('title').value.trim(),
        developer: $('developer').value.trim(),
        publisher: $('publisher').value.trim(),
        platforms: $('platforms').value.split(',').map(s => s.trim()).filter(Boolean),
        releaseDate: $('releaseDate').value || null,
        status: $('status').value,
        notes: $('notes').value.trim() || null
      };

      if (!payload.title) {
        $('addResult').textContent = 'Please enter a title';
        return;
      }

      $('addResult').textContent = 'Sending...';

      try {
        const res = await fetch(getBase() + '/add', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const data = await res.json();
        $('addResult').textContent = 'Response: ' + (res.ok ? 'success' : ('error ' + res.status));
        showJson(data);
      } catch (err) {
        $('addResult').textContent = 'Network error: ' + err.message;
      }
    }

    async function fetchList(path) {
      tableWrap.innerHTML = '<div class="muted">Loading...</div>';
      hideJson();

      try {
        const res = await fetch(getBase() + path);
        const data = await res.json();
        renderTable(data);
      } catch (err) {
        tableWrap.innerHTML = '<div class="muted">Network error: ' + err.message + '</div>';
      }
    }

    $('addBtn').addEventListener('click', postAdd);
    $('getAll').addEventListener('click', () => fetchList('/games'));
    $('getUpcoming').addEventListener('click', () => fetchList('/upcoming'));
    $('getReleased').addEventListener('click', () => fetchList('/released'));
    $('searchBtn').addEventListener('click', () => {
      const q = $('q').value.trim();
      if (!q) return fetchList('/games');
      fetchList('/games?q=' + encodeURIComponent(q));
    });

    (function demoSamples() {
      const sample = [
        { title: 'Midnight Runner', platforms: ['PC', 'Switch'], releaseDate: '2024-11-03', status: 'released', developer: 'IndieWave' },
        { title: 'Solar Siege', platforms: ['PS5', 'Xbox'], releaseDate: '2026-03-12', status: 'upcoming', developer: 'Orbit Studios' },
      ];
      renderTable(sample);
    })();
  </script>

</body>
</html>
